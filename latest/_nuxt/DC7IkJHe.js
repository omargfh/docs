import{d as x,r as m,q as S,x as $,a9 as R,aa as Q,ab as k,ac as B,c as I,w as d,ad as F,o as P,i as s,D as U,_ as Y}from"#entry";import E from"./Blt3xjRC.js";import H from"./BG7SiWYA.js";import V from"./BAKoBVkn.js";import A from"./HbAwO7QK.js";import D from"./BezGBr39.js";import N from"./CRSb-D5W.js";import j from"./DaKitZw5.js";import{s as O}from"./CgiAIXOa.js";import"./kdDlK9dw.js";import"./KXMxA-Qm.js";import"./CxSvMUf_.js";import"./B2Q0M_Lh.js";const z=x({__name:"SideCatalog",props:{isLoading:{type:Boolean,default:!1},isSelected:{type:Function,default:()=>!1},itemPrefix:{default:"item: "},items:{},label:{},onSelect:{type:Function,default:void 0},query:{type:Function,default:void 0},scrollMarginTop:{default:0},selectedItemLabel:{default:""},withRouteTransition:{type:Boolean,default:!1}},emits:["select"],setup(l,{emit:T}){const o=l,q=T,n=k(),c=B(),a=m(),f=m(),i=m(""),b=S(()=>i.value.length>0),L=S(()=>!b.value||!o.query?o.items:o.query(i.value));function C(e,t){if(o.onSelect?.(e,t),q("select",e,t),o.withRouteTransition&&t instanceof MouseEvent){t.preventDefault();const r=t.currentTarget.getAttribute("href");if(r===null)return;const u=new URL(r,window.location.href);u.searchParams.set("query",i.value),u.searchParams.set("parentScrollY",String(a.value?.$el?.scrollTop??0));const _=c.options.history.base,w=u.pathname.replace(_,"/").replace("//","/");c.push(w+u.search+u.hash)}}function p(e){i.value=e,h()}const M=F(),y=m(!1),v=()=>{if(y.value||o.isLoading||!(a.value||f.value))return;const e=n.query.parentScrollY;e!==void 0&&e!=="0"&&a.value?.$el&&(a.value.$el.scrollTop=Number(e)),h();const t={...n.query};delete t.parentScrollY,c.replace({query:t}),y.value=!0},h=()=>{const e=o.scrollMarginTop;setTimeout(()=>{if(!(a.value?.$el&&f.value?.$el))return;const t=a.value.$el,g=f.value.$el,r=document.querySelector(`a.${M.active}`);r?(t.scrollTo({behavior:"smooth",top:r.offsetTop-e}),g.scrollTo({behavior:"instant",top:r.offsetTop-e})):t.scrollTo({top:0})},0)};return $(()=>[o.isLoading],()=>{if(o.isLoading)return;const e=n.query.query;e&&p(e),v()}),R(()=>{v()}),Q(()=>{const e=n.query.query;e&&p(e);const t={...n.query};delete t.query,c.replace({query:t})}),(e,t)=>(P(),I(j,null,{default:d(()=>[s(E,{ref_key:"contentRef",ref:a},{default:d(()=>[s(A,{"selected-item-label":l.selectedItemLabel,"item-prefix":l.itemPrefix},null,8,["selected-item-label","item-prefix"]),s(N,{ref_key:"itemsList",ref:f},{default:d(()=>[s(H,{title:l.label},{default:d(()=>[s(D,{placeholder:"Search...","model-value":i.value,"onUpdate:modelValue":p},null,8,["model-value"])]),_:1},8,["title"]),s(V,{items:L.value,"on-select":C,"is-selected":l.isSelected,"is-loading":l.isLoading},null,8,["items","is-selected","is-loading"])]),_:1},512)]),_:1},512),U(e.$slots,"default")]),_:3}))}}),G={$style:O},ie=Object.assign(Y(z,[["__cssModules",G]]),{__name:"SideCatalog"});export{ie as default};
