import{d as _,r as f,q as S,x as w,a8 as x,a9 as $,aa as R,ab as Q,c as k,w as m,ac as B,o as I,i as s,D as F,_ as P}from"#entry";import Y from"./D-Q8Ch9i.js";import E from"./BJD0Q-fn.js";import H from"./BhkeqoRP.js";import U from"./DSmXk_wS.js";import V from"./BiEkgArD.js";import A from"./BYoy8I8P.js";import D from"./DB1jEQiC.js";import{s as N}from"./DD8IzUh9.js";import"./Del8R36j.js";import"./Lb4BCcOV.js";import"./D9ciluoS.js";import"./B2Q0M_Lh.js";const j=_({__name:"SideCatalog",props:{isLoading:{type:Boolean,default:!1},isSelected:{type:Function,default:()=>!1},itemPrefix:{default:"item: "},items:{},label:{},onSelect:{type:Function,default:void 0},query:{type:Function,default:void 0},scrollMarginTop:{default:0},selectedItemLabel:{default:""},withRouteTransition:{type:Boolean,default:!1}},emits:["select"],setup(a,{emit:T}){const o=a,q=T,n=R(),d=Q(),l=f(),c=f(),i=f(""),C=S(()=>i.value.length>0),L=S(()=>!C.value||!o.query?o.items:o.query(i.value));function b(e,t){if(o.onSelect?.(e,t),q("select",e,t),o.withRouteTransition&&t instanceof MouseEvent){t.preventDefault();const r=t.currentTarget.getAttribute("href");if(r===null)return;const u=new URL(r,window.location.href);u.searchParams.set("query",i.value),u.searchParams.set("parentScrollY",String(l.value?.$el?.scrollTop??0)),d.push(u.pathname+u.search+u.hash)}}function p(e){i.value=e,h()}const M=B(),y=f(!1),v=()=>{if(y.value||o.isLoading||!(l.value||c.value))return;const e=n.query.parentScrollY;e!==void 0&&e!=="0"&&l.value?.$el&&(l.value.$el.scrollTop=Number(e)),h();const t={...n.query};delete t.parentScrollY,d.replace({query:t}),y.value=!0},h=()=>{const e=o.scrollMarginTop;setTimeout(()=>{if(!(l.value?.$el&&c.value?.$el))return;const t=l.value.$el,g=c.value.$el,r=document.querySelector(`a.${M.active}`);r?(t.scrollTo({behavior:"smooth",top:r.offsetTop-e}),g.scrollTo({behavior:"instant",top:r.offsetTop-e})):t.scrollTo({top:0})},0)};return w(()=>[o.isLoading],()=>{if(o.isLoading)return;const e=n.query.query;e&&p(e),v()}),x(()=>{v()}),$(()=>{const e=n.query.query;e&&p(e);const t={...n.query};delete t.query,d.replace({query:t})}),(e,t)=>(I(),k(D,null,{default:m(()=>[s(Y,{ref_key:"contentRef",ref:l},{default:m(()=>[s(U,{"selected-item-label":a.selectedItemLabel,"item-prefix":a.itemPrefix},null,8,["selected-item-label","item-prefix"]),s(A,{ref_key:"itemsList",ref:c},{default:m(()=>[s(E,{title:a.label},{default:m(()=>[s(V,{placeholder:"Search...","model-value":i.value,"onUpdate:modelValue":p},null,8,["model-value"])]),_:1},8,["title"]),s(H,{items:L.value,"on-select":b,"is-selected":a.isSelected,"is-loading":a.isLoading},null,8,["items","is-selected","is-loading"])]),_:1},512)]),_:1},512),F(e.$slots,"default")]),_:3}))}}),O={$style:N},se=Object.assign(P(j,[["__cssModules",O]]),{__name:"SideCatalog"});export{se as default};
